name: ðŸš€ Deploiement du site sur cPanel
on: 
  push:
    branches:
      - main
jobs:
  web-deploy:
    name: ðŸŽ‰ DÃ©ploiement
    runs-on: ubuntu-latest
    steps:
    - name: ðŸšš Obtenir le code le plus rÃ©cent
      uses: actions/checkout@v3
    
    # - name: ðŸ“‚ Synchronisation des fichiers
      # uses: SamKirkland/FTP-Deploy-Action@v4.3.4
    - name: Installer lftp
      run: sudo apt-get install -y lftp

    - name: Synchroniser les fichiers modifiÃ©s avec lftp
      env:
        FTP_SERVER: ${{ secrets.FTP_SERVEUR }}
        FTP_USERNAME: ${{ secrets.FTP_USERNAME }}
        FTP_PASSWORD: ${{ secrets.FTP_PASSWORD }}
      run: |
        lftp -c "
        set ftp:ssl-allow no;
        open -u $FTP_USERNAME,$FTP_PASSWORD $FTP_SERVER;
        mirror --reverse --verbose --only-newer --no-perms --ignore-time --parallel=5 ./html/wp-content/ /home/r35d6o4d/faf.insign-africa.com/html/wp-content;
        "

        # local-dir: ./html/wp-content/
        # server-dir: /home/r35d6o4d/faf.insign-africa.com/html/wp-content